#panelDashboard .grid.two-line{grid-template-columns: repeat(6, 1fr); align-items:end; gap:6px}
:root{
  --bg: #0f172a;
  --panel: #111827;
  --muted: #94a3b8;
  --text: #e5e7eb;
  --accent: #7c3aed;
  --accent-2: #22d3ee;
  --danger: #ef4444;
  --success: #10b981;
  --ring: rgba(124,58,237,.35);
}
*{box-sizing:border-box}
html,body{height:100%; overflow:hidden}
body{
  margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(1200px 600px at 10% -10%, #1e293b 0%, #0f172a 50%), var(--bg);
  color: var(--text);
}
.container{max-width:100%; margin:0 auto; padding: 0 8px}
.skip-link{position:absolute; left:-9999px}
.skip-link:focus{left:16px; top:16px; background:#fff; color:#000; padding:8px 12px; border-radius:6px}

.site-header{position:sticky; top:0; backdrop-filter:saturate(180%) blur(10px); z-index:10}
.header-bar{display:flex; align-items:center; justify-content:space-between; padding:10px 0}
.brand{display:flex; gap:10px; align-items:center}
.brand-mark{width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg, var(--accent), var(--accent-2))}
.brand-name{font-weight:700; letter-spacing:.2px}
.icon-btn{background:transparent; border:1px solid #334155; color:var(--text); padding:6px 10px; border-radius:8px}

.layout{display:grid; grid-template-columns:200px 1fr; gap:0; align-items:start; position:relative}
.layout::before{content:""; position:absolute; inset:0; background:rgba(17,24,39,.8); border:1px solid #1f2937; border-radius:14px}
.layout::after{content:""; position:absolute; top:0; bottom:0; left:200px; width:1px; background:#1f2937}
.layout > *{position:relative; z-index:1}
@media (max-width: 900px){
  .layout{grid-template-columns:1fr}
  .sidebar{position:fixed; inset:60px 0 auto 0; transform:translateY(-120%); transition:transform .25s ease; z-index:20}
  .sidebar.open{transform:translateY(0)}
}

.sidebar{background:transparent; border:0; border-right:1px solid #1f2937; border-radius:0; padding:12px 8px 12px 12px; position:sticky; top:52px; height:calc(100vh - 64px); overflow:auto}
.menu{list-style:none; margin:0; padding:0}
.menu a{display:block; padding:10px 12px; color:var(--text); text-decoration:none; border-radius:8px}
.menu a.active, .menu a:hover{background:#1f2937}
.menu a.active{box-shadow: inset 0 0 0 2px var(--accent); border-left:3px solid var(--accent);}
.menu .muted hr{border:0; border-top:1px solid #1f2937; margin:10px 0}
.sidebar-footer{margin-top:16px; color:var(--muted)}

.content{height:calc(100vh - 64px); overflow:hidden; padding-right:8px}
.content.page-scroll{overflow:auto}
.content.editor-open{overflow:auto}
.card{background:rgba(17,24,39,.8); border:1px solid #1f2937; border-radius:14px; overflow:hidden; margin-bottom:12px}
.card-header{display:flex; align-items:center; justify-content:space-between; padding:10px 16px; border-bottom:1px solid #1f2937}
.card-header .tabs{border-bottom:0; padding:0; margin:0}
.brand{margin-left:12px}
.user-nav{margin-right:12px}
.card-title{margin:0; font-size:16px}
.actions{display:flex; gap:10px}

.btn{background:#334155; color:var(--text); border:1px solid #475569; border-radius:10px; padding:6px 10px; cursor:pointer; font-size:14px}
.btn:hover{filter:brightness(1.1)}
.btn.primary{background:linear-gradient(135deg, var(--accent), var(--accent-2)); border-color:transparent}
.btn.secondary{background:#0b1220}
.btn.danger{background:#1f2937; border-color:#ef4444; color:#fecaca}
.btn.icon{padding:2px 6px; font-size:12px}
.btn.icon.success{border-color: var(--success); color: var(--success); background:transparent}
.btn.icon.reject{border-color: var(--danger); color: var(--danger); background:transparent}
.btn.icon.edit{border-color: var(--accent); color: var(--text); background:transparent}
.btn.icon.eye{border-color: #475569; color: var(--text); background:transparent}

.search-panel{border-bottom:1px solid #1f2937; padding:8px 6px}
.search-panel.one-line .grid{grid-template-columns: 0.7fr 0.7fr 0.5fr 0.5fr 0.5fr 0.5fr 0.5fr 0.6fr 0.4fr; align-items:end; gap:4px}
.search-panel.two-line .grid{grid-template-columns: repeat(6, minmax(0,1fr)); gap:6px}
.search-panel.two-line .grid .grid-actions{grid-column: 6; grid-row: 2; justify-self:end}
.search-panel .grid > *{min-width:0}
.search-panel select, .search-panel input{max-width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.search-panel.one-line .grid .grid-actions{justify-content:flex-start}
.search-panel .grid label span{font-size:13px; margin-left:8px}
.search-panel input, .search-panel select{padding:4px 6px; font-size:13px}
.search-panel .btn{padding:6px 10px; font-size:13px}
.grid{display:grid; grid-template-columns:repeat(6, 1fr); gap:12px}
.grid label{display:flex; flex-direction:column; gap:6px}
.grid .span-2{grid-column: span 2}
.grid-actions{display:flex; gap:10px; align-items:end}
@media (max-width: 900px){
  .grid{grid-template-columns:repeat(2, 1fr)}
  .grid .span-2{grid-column:1 / -1}
}
input, select, textarea{background:#0b1220; color:var(--text); border:1px solid #334155; border-radius:10px; padding:6px 8px; font-size:14px}
input:focus, select:focus, textarea:focus{outline:none; box-shadow:0 0 0 3px var(--ring)}

.tabs{display:flex; gap:6px; padding:8px 0; border-bottom:0}
.tabs [role=tab]{background:#0b1220; color:var(--text); border:1px solid #334155; padding:6px 10px; border-radius:999px}
.btn.secondary#toggleSearch{background:transparent; border-color: var(--accent); color: #e0e7ff}
.btn.secondary#toggleSearch:hover{background: rgba(124,58,237,0.12)}
.tabs [aria-selected=true]{background:linear-gradient(135deg, var(--accent), var(--accent-2)); border-color:transparent}

.table-wrap{overflow:auto}
.table{width:100%; min-width:900px; border-collapse:separate; border-spacing:0}
.table th, .table td{padding:6px 6px; border-bottom:1px solid #1f2937; text-align:left; font-size:13px; line-height:1.25}
.table th{font-weight:600}
.table tbody tr:hover{background:#0b1220}
.th-sort{background:transparent; border:0; color:inherit; cursor:pointer; font:inherit; padding:0}

.form-actions{display:flex; gap:10px; padding:10px 0}
.attachment small{color:var(--muted)}
.file-preview{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}
.file-chip{background:#0b1220; border:1px solid #334155; padding:6px 8px; border-radius:999px; display:flex; gap:6px; align-items:center; max-width:220px}
.file-chip a{display:inline-block; max-width:180px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.file-chip button{background:transparent; color:#fecaca; border:0; cursor:pointer}

.alert{margin:12px 16px; padding:10px 12px; border-radius:10px}
.alert.info{background:#0b1220; border:1px solid #334155; color:#c7d2fe}

.notes{padding:0 16px 16px}
.note-form{display:flex; gap:8px; align-items:start}
.note-list{display:grid; gap:8px; margin-top:10px}
.note{background:#0b1220; border:1px solid #334155; border-radius:10px; padding:10px}
.note .meta{color:var(--muted); font-size:12px}

.toast{position:fixed; top:10px; left:50%; transform:translateX(-50%); background:#111827; border:1px solid #334155; padding:12px 16px; border-radius:10px; z-index:1000}
.sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}

/* Full-screen login overlay */
/* Keep layout visible so the login overlay can render even if it's nested */
.auth .layout{display:block}
#panelLogin{position:fixed; inset:0; background:rgba(15,23,42,.92); z-index:50; display:none}
.auth #panelLogin:not([hidden]){display:grid; place-items:center}
#panelForgot,#panelReset{position:fixed; inset:0; background:rgba(15,23,42,.92); z-index:60; display:none}
.auth #panelForgot:not([hidden]), .auth #panelReset:not([hidden]){display:grid; place-items:center}
.auth .site-header .user-nav #loginBtn{display:none}

/* Hide unused header menu toggle */
#menuToggle{display:none}

/* Improve visibility of calendar icons on date inputs */
input[type="date"]::-webkit-calendar-picker-indicator{
  opacity:1;
  filter: invert(72%) sepia(52%) saturate(522%) hue-rotate(180deg) brightness(105%) contrast(98%);
  cursor:pointer;
}
input[type="date"]:hover::-webkit-calendar-picker-indicator{
  filter: invert(80%) sepia(60%) saturate(600%) hue-rotate(185deg) brightness(110%) contrast(100%);
}
input[type="date"]:focus::-webkit-calendar-picker-indicator{
  filter: invert(90%) sepia(70%) saturate(800%) hue-rotate(190deg) brightness(115%) contrast(105%);
}

/* Horizontal scroll for wide data tables */
.table-wrap{overflow-x:visible}
.card .table-wrap + form{margin-top:12px}
.table{min-width:0}
/* Keep selection + action columns compact and tight */
.table th:first-child, .table td:first-child{width:34px}
.table th:nth-child(2), .table td:nth-child(2){width:100px}
.table td:nth-child(7){text-align:center}
.table td:nth-child(4){white-space:normal; word-break:break-word}

/* Custom multi-select dropdown */
.ms{position:relative}
.ms select{display:none}
.ms-display{background:#0b1220; border:1px solid #334155; border-radius:10px; padding:6px 8px; cursor:pointer; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.ms-display.open{box-shadow:0 0 0 3px var(--ring)}
.ms-menu{position:fixed; background:#0b1220; border:1px solid #334155; border-radius:10px; padding:6px; z-index:90; min-width:220px; max-height:240px; overflow:auto; box-shadow:0 12px 40px rgba(0,0,0,.35)}
.ms-item{display:flex; align-items:center; gap:8px; padding:4px 6px; border-radius:6px}
.ms-item:hover{background:#111827}
.ms-item input{accent-color:var(--accent)}
.ms-actions{display:flex; justify-content:space-between; gap:8px; padding:6px}
.ms-actions .btn{padding:4px 8px; font-size:12px}

/* Compliances: use table area as scroll container; remove outer card scrollbar */
.content > .card:first-of-type .tab-panels{flex:1 1 auto; overflow:hidden}
#panelForMe:not([hidden]), #panelByMe:not([hidden]){height:100%; display:flex; flex-direction:column}
#panelForMe .table-wrap, #panelByMe .table-wrap{flex:1 1 auto; overflow:auto}

/* Sticky headers for Compliances lists */
#panelForMe .table thead th,
#panelByMe .table thead th{position:sticky; top:0; background:var(--panel); z-index:2}

/* Make the first (list) card fixed-height with its own vertical scroll */
.content > .card:first-of-type:not([hidden]){height:calc(100vh - 64px); display:flex; flex-direction:column; background:transparent; border:0; border-radius:0}
/* Unify all main panels into a single container card */
.layout .content > .card{background:transparent; border:0; border-radius:0; margin-bottom:0}
.content > .card:first-of-type .search-panel{flex:0 0 auto}
.content > .card:first-of-type .tabs{flex:0 0 auto}
.content > .card:first-of-type .tab-panels{flex:1 1 auto; overflow:hidden}

/* Make the editor card use internal vertical scroll with sticky header */
#editor:not([hidden]){height:calc(100vh - 64px); overflow-y:auto; overflow-x:visible; margin-bottom:0}
#editor .card-header{position:sticky; top:0; background:var(--panel); z-index:2}
#editor .grid{min-width:0; grid-template-columns:repeat(3, 1fr)}
#editor form{padding:0 16px 16px}

/* Due Date N/A inline UI */
.inline-na .na-wrap{display:flex; align-items:center; gap:8px}
.inline-na .na-toggle{display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border:1px solid #334155; border-radius:999px; cursor:pointer; user-select:none; background:#0b1220}
.inline-na input[type="checkbox"]{accent-color:#10b981}
.inline-na.na-selected input[type="date"]{opacity:.6}

/* Settings panels: avoid forced horizontal scrolling */
#panelCategories .table,
#panelCompanies .table,
#panelUsers .table,
#panelReminderPolicies .table{min-width:0}
#panelCategories .table-wrap,
#panelCompanies .table-wrap,
#panelUsers .table-wrap,
#panelReminderPolicies .table-wrap{overflow-x:visible}
#panelReminderPolicies .table input{width:110px; max-width:110px; text-align:right}
#panelReminderPolicies .table{width:auto; min-width:0; display:inline-table}
#panelReminderPolicies .table th:first-child,
#panelReminderPolicies .table td:first-child{padding-right:16px}
#panelReminderPolicies .table th:nth-child(2),
#panelReminderPolicies .table td:nth-child(2){padding-right:8px}
#panelReminderPolicies .table th:last-child,
#panelReminderPolicies .table td:last-child{padding-left:8px}
#panelReminderPolicies .table td{white-space:normal}

#panelStandards .table{min-width:0}
#panelStandards .table th:nth-child(1),
#panelStandards .table td:nth-child(1){width:45%; white-space:normal; word-break:break-word}
#panelStandards .table th:nth-child(2),
#panelStandards .table td:nth-child(2){width:14%}
#panelStandards .table th:nth-child(3),
#panelStandards .table td:nth-child(3){width:12%}
#panelStandards .table th:nth-child(4),
#panelStandards .table td:nth-child(4){width:9%}
#panelStandards .table th:nth-child(5),
#panelStandards .table td:nth-child(5){width:9%}
#panelStandards .table th:nth-child(6),
#panelStandards .table td:nth-child(6){width:11%}
#panelStandards .table-wrap{overflow-x:visible}

/* Auth overlay redesign */
.auth-overlay{position:fixed; inset:0; background:linear-gradient(180deg, rgba(15,23,42,.96), rgba(15,23,42,.96)); z-index:70; display:none}
.auth .auth-overlay:not([hidden]){display:grid; place-items:center}
.auth-card{width:100%; max-width:520px; background:#0b1220; border:1px solid #1f2937; border-radius:14px; box-shadow:0 10px 40px rgba(0,0,0,.35); overflow:hidden}
.auth-card header{padding:16px 18px; border-bottom:1px solid #1f2937; display:flex; align-items:center; justify-content:space-between}
.auth-card h2{margin:0; font-size:22px}
.auth-card .body{padding:18px}
.auth-form{display:grid; grid-template-columns:1fr 1fr; gap:12px}
.auth-form .full{grid-column:1 / -1}
.auth-form label{display:flex; flex-direction:column; gap:6px}
.auth-actions{display:flex; gap:10px; align-items:center}
.auth-actions .spacer{flex:1}
.auth-hint{margin-top:8px; color:#94a3b8}
.auth-form .alert{white-space:normal; overflow:visible; text-overflow:clip}



/* Skeletons */
.skeleton{background:linear-gradient(90deg, #0b1220, #0f172a, #0b1220); background-size:200% 100%; animation:shimmer 1.2s infinite}
.skeleton.text{height:12px; border-radius:6px}
.skeleton.row{height:36px; border-bottom:1px solid #1f2937}
@keyframes shimmer{0%{background-position:200% 0} 100%{background-position:-200% 0}}

/* Dashboard charts */
.chart-grid{display:grid; grid-template-columns:repeat(2, 1fr); gap:12px; margin-top:12px}
.stat-grid{display:grid; grid-template-columns:repeat(4, 1fr); gap:12px; margin-top:12px}
@media (max-width: 1100px){ .stat-grid{grid-template-columns:repeat(2,1fr)} }
@media (max-width: 1100px){ .chart-grid{grid-template-columns:1fr} }
.chart-card{background:#0b1220; border:1px solid #1f2937; border-radius:12px; padding:10px; display:flex; flex-direction:column; min-height:220px}
.chart-card-header{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:0 2px 6px; border-bottom:1px solid #111827}
.chart-card-header h3{margin:0; font-size:14px; color:#cbd5e1}
.chart-canvas-wrap{position:relative; width:100%; height:280px}
.chart-canvas-wrap canvas{position:absolute; inset:0; width:100% !important; height:100% !important}
.chart-max{padding:4px 8px}

/* Dashboard stat cards */
.stat-card{background:#0b1220; border:1px solid #1f2937; border-radius:12px; padding:14px; display:flex; flex-direction:column; gap:6px; min-height:90px; box-shadow:0 1px 0 #0b1220 inset, 0 0 0 1px rgba(255,255,255,0.02)}
.stat-card:hover{filter:brightness(1.05)}
.stat-title{font-size:12px; color:#cbd5e1}
.stat-value{font-size:26px; font-weight:800}

/* Chart modal */
.chart-modal{position:fixed; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.55); z-index:80}
.chart-modal[hidden]{display:none !important}
.chart-modal-card{width:min(1200px, 96vw); height:min(80vh, 800px); background:#0b1220; border:1px solid #1f2937; border-radius:12px; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.45)}
.chart-modal-card header{display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid #111827}
.chart-modal-card h3{margin:0; font-size:16px}
.chart-modal-body{position:relative; height:calc(100% - 48px); padding:8px}
.chart-modal-body canvas{position:absolute; inset:8px; width:calc(100% - 16px) !important; height:calc(100% - 16px) !important}

/* Fixed-height Dashboard and Standards cards with internal scroll */
#panelDashboard:not([hidden]),
#panelStandards:not([hidden]){height:calc(100vh - 64px); display:flex; flex-direction:column; margin-bottom:0}
#panelDashboard:not([hidden]) > header,
#panelStandards:not([hidden]) > header{flex:0 0 auto}
#panelDashboard:not([hidden]) > div,
#panelStandards:not([hidden]) > div{flex:1 1 auto; overflow:auto; overflow-x:hidden; min-height:0}

/* Fixed-height Settings card with internal vertical scroll */
#panelSettings:not([hidden]){height:calc(100vh - 64px); display:flex; flex-direction:column; margin-bottom:0}
#panelSettings:not([hidden]) > header{flex:0 0 auto}
#panelSettings:not([hidden]) > div{flex:1 1 auto; overflow:hidden; display:flex; flex-direction:column; min-height:0}
/* Within settings, keep tabs fixed and panels filling remaining space */
#panelSettings .tabs{flex:0 0 auto}
#panelSettings [role="tabpanel"]{flex:1 1 auto; min-height:0}

/* In Settings: keep add forms fixed at bottom; list scrolls */
#panelSettings #panelCategories:not([hidden]),
#panelSettings #panelCompanies:not([hidden]),
#panelSettings #panelUsers:not([hidden]),
#panelSettings #panelReminderPolicies:not([hidden]){display:flex; flex-direction:column; height:100%; overflow:hidden; min-height:0}
#panelSettings #panelCategories .table-wrap,
#panelSettings #panelCompanies .table-wrap,
#panelSettings #panelUsers .table-wrap,
#panelSettings #panelReminderPolicies .table-wrap{flex:1 1 auto; overflow:auto; min-height:0}
/* Inner lists scroll within available space */
#panelSettings #panelCategories .table-wrap,
#panelSettings #panelCompanies .table-wrap,
#panelSettings #panelUsers .table-wrap{padding-bottom:0}
/* Reserve space so last rows don't hide behind sticky add form */
#panelSettings #panelCategories .table-wrap,
#panelSettings #panelCompanies .table-wrap,
#panelSettings #panelUsers .table-wrap{padding-bottom:0}
#panelSettings #panelCategories:not([hidden]) .form-actions,
#panelSettings #panelCompanies:not([hidden]) .form-actions,
#panelSettings #panelUsers:not([hidden]) .form-actions{flex:0 0 auto; background:var(--panel); border-top:1px solid #1f2937; position:sticky; bottom:0}

/* Sticky headers for Settings lists so Name/Action row stays visible */
#panelCategories .table thead th,
#panelCompanies .table thead th,
#panelUsers .table thead th{position:sticky; top:0; background:var(--panel); z-index:2}
